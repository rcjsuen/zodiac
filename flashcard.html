<html>
  <head>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		ga('create', 'UA-57159875-2', 'auto');
		ga('send', 'pageview');
	</script>
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="-1">
    <meta charset="utf-8" />
    <title>Zodiac</title>
    <style>
		body {
	    	background: #333333;
	    }
	    
	    canvas { display: block; margin: 0 auto; }
	    
		ul {
			padding: 0;
			height: 100%;
			margin-top: 0;
			margin-left: 0;
			list-style-type: none;
			background-color: #3b4b54;
		}
		
		li a {
			cursor: pointer;
			padding: 8px;
			display: block;
			color: #ffffff;
			font-size: 16px;
			font-family: Calibri, Arial, Helvetica, Bitstream Sans, sans-serif;
		}
		
		li .active {
			background-color: #1bb199;
		}
		
		li a:hover:not(.active) {
			background-color: #1bb1ee;
		}
		
		input[type="text"] {
			border: 2px solid #dadada;
			border-radius: 7px;
		}
		
		.glow {
			border-color: #ed9e9e;
			box-shadow: 0 0 10px #ed9e9e;
			color: #ff0000;
		}
	    
	    .setup {
	    	font-family: Calibri, Arial, Helvetica, Bitstream Sans, sans-serif;
			position: absolute;
		    top: 50%;
		    left: 50%;
		    -moz-transform: translateX(-50%) translateY(-50%);
		    -webkit-transform: translateX(-50%) translateY(-50%);
		    transform: translateX(-50%) translateY(-50%);
			background: #333333;
		}
	
		.setup > div {
			padding: 20px;
			border-radius: 10px;
			background-image: linear-gradient(120deg, #fff, #bbb)
		}
		
		.preview > div {
			font-family: Calibri, Arial, Helvetica, Bitstream Sans, sans-serif;
			font-size: 20px;
			margin-left: 1%;
		}

		.countdown {
		    position: absolute;
		    top: 50%;
		    left: 50%;
		    width: 500;
		    -moz-transform: translateX(-50%) translateY(-50%);
		    -webkit-transform: translateX(-50%) translateY(-50%);
		    transform: translateX(-50%) translateY(-50%);
			background: #333333;
		}

		.sample {
		    position: absolute;
		    top: 50%;
		    left: 50%;
		    -moz-transform: translateX(-50%) translateY(-50%);
		    -webkit-transform: translateX(-50%) translateY(-50%);
		    transform: translateX(-50%) translateY(-50%);
		    width: 600;
		}
		
		.flip {
			-webkit-perspective: 800;
			width: 900px;
			height: 200px;
			position: relative;
			margin: 25px auto;
		}

		.flip .card.flipped {
			transform: rotatex(-180deg);
			-moz-transform: rotatex(-180deg);
			-webkit-transform: rotatex(-180deg);
		}
		
		.flip .card {
			width: 100%;
			height: 100%;
			transform-style: preserve-3d;
			-webkit-transform-style: preserve-3d;
			transition: 0.5s;
			-webkit-transition: 0.5s;
		}

		.flip .card .face {
			border-style: solid;
			width: 100%;
			height: 100%;
			position: absolute;
			font-family: Calibri;
			font-size: 3em;
			text-align: center;
		}
		
		.flip .card .front {
			border-style: solid;
			position: absolute;
		}
		
		.flip .card .back {
			border-style: solid;
			transform: rotatex(-180deg);
			-webkit-transform: rotatex(-180deg);
		}
		
		.general {
	    	font-family: Calibri, Arial, Helvetica, Bitstream Sans, sans-serif;
	    	font-size: 25px;
		}
		
		.report {
	    	font-family: Calibri, Arial, Helvetica, Bitstream Sans, sans-serif;
	    	font-size: 45px;
		}
		
		.input {
	    	font-family: Calibri, Arial, Helvetica, Bitstream Sans, sans-serif;
			font-size: 30px;
			text-align: center;
		}
		
		.inputMono {
	    	font-family: Consolas, Bitstream Mon Sans, monospace;
			font-size: 30px;
			text-align: center;
		}
		
		.close {
		    font-family: Calibri, Arial, Helvetica, sans-serif;
		    font-size: 22px;
		    background: #606061;
		    color: #FFFFFF;
		    line-height: 28px;
		    position: absolute;
		    margin-bottom: 210;
		    bottom: 50%;
		    left: 50%;
		    margin-left: 386;
		    width: 28px;
		    text-align: center;
		    text-decoration: none;
		    font-weight: bold;
		    -webkit-border-radius: 12px;
		    -moz-border-radius: 12px;
		    border-radius: 12px;
		    -moz-box-shadow: 1px 1px 3px #000;
		    -webkit-box-shadow: 1px 1px 3px #000;
		    box-shadow: 1px 1px 3px #000;
			cursor: pointer;
		}

		.close:hover { background: #1bb1ee; }
		
		.selected {
			background-color: #99ff99;
		}

		.default {
			background-color: #ffffff;
			transition: 2.0s;
		}

		.wrong {
			background-color: #ff9999;
		}
	
		.cleared {
			background-color: #ffff99;
			transition: 3.0s;
		}
		
		.matchingCardContent {
			text-align: center;
			font-size: 5vh;
		}

		.matching {
			width: 35vh;
			height: 18vh;
		}

		.matching .card.flipped {
			transform: rotatex(-180deg);
			-moz-transform: rotatex(-180deg);
			-webkit-transform: rotatex(-180deg);
		}
		
		.matching .card {
			width: 100%;
			height: 100%;
			transform-style: preserve-3d;
			-webkit-transform-style: preserve-3d;
			transition: 0.5s;
			-webkit-transition: 0.5s;
		}

		.matching .card .face {
			border-style: solid;
			width: 100%;
			height: 100%;
			font-family: Tahoma;
			text-align: center;
		}
		
		.matching .card .front {
			border-style: solid;
		}
		
		.matching .card .back {
			border-style: solid;
			transform: rotatex(-180deg);
			-webkit-transform: rotatex(-180deg);
		}
    </style>
  </head>
  <body id="body">

<div id="content" style="display: none;">

<center>

<p/>
<p><canvas id="trialTimer" width="100" height="100"/></p>
<p id="remaining" class="general"></p>

<div id="flashcardDiv" class="flip"> 
    <div id="card" class="card"> 
        <div class="face front" id="front">
        	<table bgcolor="#ffffff" height="200" width="900" id="frontTable">
        		<tr>
        			<td><p align="center" style="font-size: 100px" id="frontContent"></p></td>
        		</tr>
        	</table>
		</div> 
        <div class="face back" id="back">
        	<table bgcolor="#ffffff" height="200" width="900" id="backTable">
        		<tr>
        			<td><p align="center" style="font-size: 100px" id="backContent"></p></td>
        		</tr>
        	</table>
        </div>
    </div>
</div>

<p id="flashcardContent">
<input id="input"  class="input" type="text" disabled/>
<button type="button" class="input" onClick="onClick()">次へ</button>
</p>

<p id="alphabetsContent" class="input" style="display: none;">
<span id="alphabetsDisplay" class="inputMono"></span><br/>
<span id="alphabetsInput" class="inputMono"></span>
</p>

<p id="readingContent" class="input" style="display: none;">
<span id="readingDisplay" class="input"></span>
<br/><br/>
<button class="input" type="button" onClick="onClick()">次へ</button>
<button class="input" type="button" onClick="onShow()">答えを示す</button>
<p/>

<p id="karutaContent" class="input" style="display: none;">
<p/>

<p id="matchingContent" class="input" style="display: none;">
<p/>

<p id="chooseContent" class="input" style="display: none;">
<table id="table" align="center" cellpadding="10">
<tr>

<td>
<div class="matching">
<div id="chooseCard1" class="card">
<div class="face front" id="chooseFront1">
<table bgcolor="#ffffff" width="100%" height="100%" id="chooseFrontTable1">
<tr>	
<td>
<p id="chooseFrontContent1" class="matchingCardContent"></p>
</td>
</tr>
</table>
</div>
<div class="face back" id="chooseBack1" style="display: none;">
<table id="chooseBackTable1" width="100%" height="100%" bgcolor="#ffffff" style="visibility: hidden;">
<tr>
<td>
<p id="chooseBackContent1" class="matchingCardContent"></p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>

<td>
<div class="matching">
<div id="chooseCard2" class="card">
<div class="face front" id="chooseFront2">
<table bgcolor="#ffffff" width="100%" height="100%" id="chooseFrontTable2">
<tr>
<td>
<p id="chooseFrontContent2" class="matchingCardContent"></p>
</td>
</tr>
</table>
</div>
<div class="face back" id="chooseBack2" style="display: none;">
<table id="chooseBackTable2" width="100%" height="100%" bgcolor="#ffffff" style="visibility: hidden;">
<tr>
<td>
<p id="chooseBackContent2" class="matchingCardContent"></p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>

<td>
<div class="matching">
<div id="chooseCard3" class="card">
<div class="face front" id="chooseFront3">
<table bgcolor="#ffffff" width="100%" height="100%" id="chooseFrontTable3">
<tr>
<td>
<p id="chooseFrontContent3" class="matchingCardContent"></p>
</td>
</tr>
</table>
</div>
<div class="face back" id="chooseBack3" style="display: none;">
<table id="chooseBackTable3" width="100%" height="100%" bgcolor="#ffffff" style="visibility: hidden;">
<tr>
<td>
<p id="chooseBackContent3" class="matchingCardContent"></p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>

</tr>
</table>
</p>

<canvas id="canvas" width=610" height="250"></canvas>
<p id="mistake" class="general"></p>
<p/>


</center>
</div>

<div id="openModal" class="setup">
	<div>
		<center>
		<div>
		<img src="images/logo.png"/><p/>
		<p align="right">© 2015, 2016 Remy Suen</p>
		<hr/>
		</div>
		</center>
		
		<input type="radio" id="local" label="Local File" name="file" onClick="onLocalClick()" checked="true">ローカル　ファイル</input>
		<input type="file" id="files" multiple/>
		<p>
			<input type="radio" id="local" label="Samples" name="file" onClick="onSampleClick()" autocomplete="off">サンプル　ファイル</input>
			<span id="sampleName"></span>
		</p>
		<p/>
		<input type="checkbox" id="timeCheckbox" onClick="toggleTimeTrial()">時間制限</input>
		<input type="number" id="time" min="1" disabled/><p/>
		
		<table border="0" cellspacing="0" cellpadding="0" height="100%" width="100%">
		<tr>
		<td valign="top" width="40%" bgcolor="#3b4b54">
		<ul id="navbar">
			<li><a id="flashcard" class="active">フラッシュカード</a></li>
			<li><a id="alphabet">アルファベット抜け</a></li>
			<li><a id="reading">読む練習</a></li>
			<li><a id="matching">マッチング</a></li>
			<li><a id="choose">単語選び</a></li>
			<li><a id="karuta">カルタ</a></li>
		</ul>
		</td>
		<td valign="top" bgcolor="#ffffff" style="padding: 2" width="60%">
		<p id="keyboardOptions"><input type="checkbox" id="keyboardCheckbox" state="true" checked="true">バーチャルキーボード</input></p>
		<p id="alphabetOptions" style="display: none;"><input type="number" id="alphabetRemoval" min="1" value="1">抜け</input></p>
		<p id="languageOptions" style="display: none;">カードの言語:<br/>
		<input type="radio" id="cardEnglish" name="cardLanguage" checked="true">英語</input><br/>
		<input type="radio" name="cardLanguage">日本語</input><br/>
		</p>
		<p id="matchingOptions" style="display: none;">個別のセットアップがありません。</p>
		</td>
		</tr>
		</table>
		<p align="center"><button id="startBtn" type="button" onClick="startup()" disabled>スタート</button></p>
	</div>
</div>

<div id="countdown" class="countdown" style="display: none">
	<canvas id="countdownCanvas" width="500" height="500"></canvas>
</div>

<div id="report" class="setup" style="display: none">
	<div>
		<p id="reportTimeLimit" class="report"></p>
		<p id="reportRemainingTime" class="report"></p>
		<p id="reportAverageTime" class="report"></p>
		<p id="reportRemainingCards" class="report"></p>
		<p align="center">
			<button id="setupBtn" type="button" onClick="setup()">セットアップに戻る</button>
			<button id="restartBtn" type="button" onClick="restart()">もう一回</button>
		</p>
	</div>
</div>

<div id="sample" class="sample" style="display: none">
<iframe id="sampleFrame" frameborder="0" src="list.html" width="700" height="450"></iframe>
</div>

<a id="sampleClose" class="close" style="display: none">X</a>

<script src="keyboard.js"></script>
<script src="zodiac.js"></script>
<script>
function hookNavbar() {
	var navbar = document.getElementById('navbar').getElementsByTagName('li');
	for (var i = 0; i < navbar.length; i++) {
		navbar[i].addEventListener('click', function(e) {
			onNav(e);
		},false);
	}	
}
hookNavbar();

function onNav(e) {
	var navbar = document.getElementById('navbar').getElementsByTagName('li');
	var anchor = e.currentTarget.getElementsByTagName("a")[0];
	if (!anchor.hasAttribute("class")) {
		for (i = 0; i < navbar.length; i++) {
			navbar[i].getElementsByTagName("a")[0].removeAttribute("class");
		}
		anchor.setAttribute("class", "active");
		
		var id = anchor.getAttribute("id");
		
		if (id === "flashcard") {
			document.getElementById("keyboardOptions").style.display = "inline";
			document.getElementById("alphabetOptions").style.display = "none";
			document.getElementById("languageOptions").style.display = "none";
			document.getElementById("matchingOptions").style.display = "none";
		} else if (id === "alphabet") {
			document.getElementById("keyboardOptions").style.display = "inline";
			document.getElementById("alphabetOptions").style.display = "block";
			document.getElementById("languageOptions").style.display = "none";
			document.getElementById("matchingOptions").style.display = "none";
		} else if (id === "reading") {
			document.getElementById("keyboardOptions").style.display = "none";
			document.getElementById("alphabetOptions").style.display = "none";
			document.getElementById("languageOptions").style.display = "inline";
			document.getElementById("matchingOptions").style.display = "none";
		} else if (id === "matching") {
			document.getElementById("keyboardOptions").style.display = "none";
			document.getElementById("alphabetOptions").style.display = "none";
			document.getElementById("languageOptions").style.display = "none";
			document.getElementById("matchingOptions").style.display = "inline";
		} else if (id === "choose") {
			document.getElementById("keyboardOptions").style.display = "none";
			document.getElementById("alphabetOptions").style.display = "none";
			document.getElementById("languageOptions").style.display = "inline";
			document.getElementById("matchingOptions").style.display = "none";
		} else if (id === "karuta") {
			document.getElementById("keyboardOptions").style.display = "none";
			document.getElementById("alphabetOptions").style.display = "none";
			document.getElementById("languageOptions").style.display = "inline";
			document.getElementById("matchingOptions").style.display = "none";
		}
	}
}

document.getElementById("local").setAttribute("checked", true);

document.getElementById("sampleClose").addEventListener("click", function() {
	document.getElementById("sample").style.display = "none";
	document.getElementById("sampleClose").style.display = "none";
	
	var iframe = document.getElementById("sampleFrame");
	var navbar = iframe.contentDocument.getElementById("navbar");
	var bullets = navbar.getElementsByTagName('li');
	for (var i = 0; i < bullets.length; i++) {
		var anchor = bullets[i].getElementsByTagName("a")[0];		
		if (anchor.hasAttribute("class")) {
			document.getElementById("sampleName").innerHTML = anchor.innerHTML;
			handleSampleSelect(anchor.getAttribute("data-filename"));
			break;
		}
	}
});

function onLocalClick() {
	document.getElementById("files").disabled = false;
}

function onSampleClick() {
	document.getElementById("files").disabled = true;

	document.getElementById("sample").style.display = "inline";
	document.getElementById("sampleClose").style.display = "inline";
}

/**
 * Callback function when the user checks or unchecks the time trial checkbox.
 */
function toggleTimeTrial() {
	// if it's not a time trial, disable the time limit input field
	document.getElementById("time").disabled = !document.getElementById("timeCheckbox").checked;
}

function createMatchingTable() {
	var table = document.createElement("table");
	table.setAttribute("id", "table");
	table.setAttribute("align", "center");
	table.setAttribute("cellpadding", "10");
	document.getElementById("matchingContent").appendChild(table);
	
	for (var j = 0; j < 4; j++) {
		var tr = document.createElement("tr");
		table.appendChild(tr);
		
		for (var count = 1; count < 4; count++) {
			var i = j * 3 + count;
			
		
			var td = document.createElement("td");
			tr.appendChild(td);
			
			var matchingDiv = document.createElement("div");
			matchingDiv.setAttribute("class", "matching");
			td.appendChild(matchingDiv);
			
			var cardDiv = document.createElement("div");
			cardDiv.setAttribute("id", "card" + i);
			cardDiv.setAttribute("class", "card");
			matchingDiv.appendChild(cardDiv);
			
			var frontDiv = document.createElement("div");
			frontDiv.setAttribute("class", "face front");
			frontDiv.setAttribute("id", "front" + i);
			cardDiv.appendChild(frontDiv);
			
			var frontTable = document.createElement("table");
			frontTable.setAttribute("bgcolor", "#ffffff");
			frontTable.setAttribute("width", "100%");
			frontTable.setAttribute("height", "100%");
			frontTable.setAttribute("id", "frontTable" + i);
			frontDiv.appendChild(frontTable);
			
			var frontTr = document.createElement("tr");
			frontTable.appendChild(frontTr);
			
			var frontTd = document.createElement("td");
			frontTr.appendChild(frontTd);
			
			var frontP = document.createElement("p");
			frontP.setAttribute("id", "frontContent" + i);
			frontP.setAttribute("class", "matchingCardContent");
			frontTd.appendChild(frontP);
			
			var backDiv = document.createElement("div");
			backDiv.setAttribute("class", "face back");
			backDiv.setAttribute("id", "back" + i);
			backDiv.setAttribute("style", "display: none;");
			cardDiv.appendChild(backDiv);
			
			var backTable = document.createElement("table");
			backTable.setAttribute("id", "backTable" + i);
			backTable.setAttribute("width", "100%");
			backTable.setAttribute("height", "100%");
			backTable.setAttribute("bgcolor", "#ffffff");
			backTable.setAttribute("style", "visibility: hidden;");
			backDiv.appendChild(backTable);
			
			var backTr = document.createElement("tr");
			backTable.appendChild(backTr);
			
			var backTd = document.createElement("td");
			backTr.appendChild(backTd);
			
			var backP = document.createElement("p");
			backP.setAttribute("id", "backContent" + i);
			backP.setAttribute("class", "matchingCardContent");
			backTd.appendChild(backP);
		}
	}
	addMouseListener();
	
	for (var j = 1; j < 13; j++) {
		frontTables[j - 1] = document.getElementById("frontTable" + j);
		backTables[j - 1] = document.getElementById("backTable" + j);
	}
}
createMatchingTable();
</script>

</body>
</html>
